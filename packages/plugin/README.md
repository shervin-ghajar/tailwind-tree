# @tailwind-tree/vite-plugin

Vite plugin for [tailwind-tree](https://www.npmjs.com/package/tailwind-tree)  
⚡ Tailwind v4 compatible · 🛠️ No setup required · 🌀 Supports dynamic `twTree(...)` class generation

---

## 🚀 What Does It Do?

Tailwind v4 doesn't support custom extractors like Tailwind v3 did.  
This plugin **bridges the gap** by scanning your source code during Vite build and extracting all `twTree(...)` usages. It then injects the result directly into Tailwind's safelist.

---

## 📦 Installation

```bash
pnpm add -D @tailwind-tree/vite-plugin
# or
yarn add -D @tailwind-tree/vite-plugin
# or
npm install -D @tailwind-tree/vite-plugin
```

---

## ⚙️ Usage

### 1. Add the Plugin to Your Vite Config

```ts
// vite.config.ts
import react from '@vitejs/plugin-react';
import tailwindcss from '@tailwindcss/vite';
import { twTreePlugin } from '@tailwind-tree/vite-plugin'; // <--- import twTreePlugin()
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    react(),
    twTreePlugin(), // <--- add twTreePlugin()
    tailwindcss(),
  ],
});
```

This configuration ensures that **Tailwind CSS v4 includes all classes generated by `twTree(...)`** calls found in your project files.

---

## 🔍 How It Works

At build time, `twTreePlugin()`:

- Scans your project source for all `twTree(...)` calls
- Resolves the nested variants and conditions
- Generates the full list of Tailwind utility classes into separate file in root directory as `tw-safelist` that will be scanned by Tailwind compiler and picked as safelist.

This simulates how extractors worked in v3 — but in a way that’s **compatible with Tailwind v4’s new architecture**.

---

## ⚠️ Limitations

> 🧠 **Note:** Tailwind may still generate **redundant classes** since it scans all string content.
> This is a known limitation of Tailwind v4’s class detection system and not related to `twTree`.

---

## 🔗 Related

- [`tailwind-tree`](https://www.npmjs.com/package/tailwind-tree) — Class composition utility
- [`@tailwind-tree/extractor`](https://www.npmjs.com/package/@tailwind-tree/extractor) — Tailwind v3 extractor
